machine:
  node:
    version: 7.2.0
  go:
    version: 1.8.1

  post:
    - curl -o- -L https://yarnpkg.com/install.sh | bash

dependencies:
  pre:
    - mkdir -p /home/ubuntu/.go_workspace/src
    - ln -s /home/ubuntu/chatter /home/ubuntu/.go_workspace/src/chatter

  override:
    - yarn install
    - go get github.com/revel/revel
    - go get github.com/revel/cmd/revel

compile:
  override:
    - yarn build-prod

test:
  override:
    - revel test chatter